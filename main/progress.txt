/*     

Challenge -once wifi disconnected, it does not sense that and change status
s2pinit if added will set a test output , normally keep it off
UART2 not yet tested/not working
wifi/server disconnection to be tested

050524T1
1.ESP_LOGI incoming messages from mqtt.
2. SIP: ,SIP?,RST,CC,UR? commands added in mqtt.

040724T1
Added first trial of MQTT sending some thing

010724T1
made 4MB variant
changed default address to kwikpay server
jmper server to GVC

27062024
1.Ensure that all query commands are replied with username as date in same as received in last command.
2.UART query replies with username and date as in TCP query.
3.In UART setting, user name and date is not required, but save user name as “LOCAL” and date as localdate variable  for example



1. Retry in case of wifi error
2. Retry in case of server disconnection
3. Send data to UART2 for debugging
4. Add MQTT
5. Add logs

1445 - started working. picked up simple task
170624T1
when pulses received - recreate again. added in GPIO_read_n_act
checked and demoed to siddhi

130624T1
1. Start Smartconfig if Jumper2 is pressed else continue as normal
2. When ssid and password detected then save in NVRAM
3. Rest exmaple code copied
4. Able to scan and save ESP TOUCH SSID and PASSWORD and save in memory
4. Trying to connect ssid3

120624T1
added ESP-TOUCH
to be called only in Test Mode
SSID 1/2 were already there. Now 3 also added


070624T1
added following commands to uart
*CC# , *FW?# ,*V: , *SL: , *CA?# , *CA: ,*FOTA#

060624
UART2 some correction made
UART2 Working
FOTA Working

270524
add erase function when BOOT switch pressed for 2 seconds
boot is IO0




230524
INH saved in memory
*MAC: when KP Server
*MAC, when GVC Server

200521
adding commands to set and read INH status
*INH:0# or *INH:1# 
reply *INH-DONE,x#
save value in INHPOutputValue
ESP IO 14 is CINHO (reverse polarity)
demo done
while doing fota also send FOTA URL to server 
display*FOTA-OVER# at end



*INH?#
reply *INH,0# or *INH,1#
display from INHInputValue
IO23 is INHInput

160524T1
FOTA commands * and # added

110524T1
copied WiFi code from example 
ESP_RETRY_GAP added
When socket connected send *WiFi X# where x is wifi number

090525T1

080524T4

0805T3
retry wifiif disconnected, not working
saved 

0805T2
if wifi disconnected - do not try socket connection

0805T1

added * and # on SSID commands

0705T3
working and socket connected

050424T1
new command added to save Port in case of Jumper
*SP:xxxx# and save 
when using jumper, use GVC server and port as set using SP command
else use server and port as set by SIP command

RTOS Frequency changes from 100Hz to 200 Hz
some bugs removed



040524T3
ignore pulses of width less than 30 msec

040524T2
Sense pulse width of some minimum value - so if CA is set as 50 - ignore pulse of width 25
checked readNActDelay. Added led blinking and one ESP_LOGI  for testing 


040524T1
have variable size pulses - done

020524T1


010524T2
small bug of CA values correctd
capture multiple pulses
Tested by Prashant


010524T1
adding memorising CA and totals parameters
working 


300424T2
send reply to server when input pulse sensed -worked
send totals is now two command *TV and *TC
*TC for cash
*TV for V commands
(6603 V command becomne Coins for 6666)


300424T1
Added *CA:pulsewidth:PolarityCommand)
polarity 0 means active low output
polarity 1 means actibe high output
working
Input pulses being senses



210424
When V command is received pulse L1
when coin are sensed pulse L2
when reply is sent pulse L3

output pins configured
CH 1/ CH5 tested
CH 3 pulses okay but low voltage
CH 7 pulses okay but low voltage
CH 4 okay
CH 2 okay



190424
*V:TID:Plan:Pulses#
skip duplicate TID
*TC?# added


180424B
Added RST command
180424
blink one LED when packet received
Blick second LED when HBT Sent
*HBT,MACID#
160424C
MAC Address is actual
addimg *FW?#
160424B Led command being added, Jumper sense added
*SL:x:y# added, set light x is 1/2/3 y is 0/1
160424A - SIP command tested
090324A - *GP1:7# working okay
070324B - decode x and y from *GP:x:y# and then generate pulses
070324A - get command from server *GP:x:y# where x is pin and y is number of pulses
change *Tx:y# to *TP:x:y#
060324C -count number of pulses within two second and send to server as *Px:y# where x is pin number and y is pulses
060324B -count number of pulses within one second
060324A - send pulse sense to socket send *Px# where x is number
060324 - check led styles
led blinks 1/2/3/4 times every 2 seconds as per status. This makes it easy to detect status. 
fast/slow blink does not work 
input sense working well and displaying status when input pin changes status

020324D -socket does not work with vending-iot.com but works with 163.232.177.23
able to connect and send MAC address
Checked with nc - l 6666 command
also data sent from server is received and displayed on ESP_LOGI

020324D - working 4094 and 3 LEDs test mode 020324D
020324C - working 4094 test mode 020324C

*/